<!DOCTYPE html>
<html lang="fr">
  <meta charset="utf-8" />
  <title>Accueil • Port de plaisance</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="/app.js"></script>
  <body>
    <div class="container">
      <h1>Port de plaisance</h1>
      <p>
        Bienvenue ! Connectez-vous pour accéder au tableau de bord et gérer
        CatWays, Réservations et Utilisateurs.
      </p>

      <h2>Connexion</h2>
      <form id="loginForm">
        <input id="email" type="email" placeholder="Email" required />
        <input
          id="password"
          type="password"
          placeholder="Mot de passe"
          required
        />
        <button>Se connecter</button>
        <div id="err" class="err" style="display: none"></div>
      </form>

      <p class="note">
        Documentation de l’API :
        <a href="/api-docs" target="_blank" rel="noreferrer">/api-docs</a>
      </p>
    </div>

    <script src="app.js"></script>
    <script>
      document
        .getElementById("loginForm")
        .addEventListener("submit", async (e) => {
          e.preventDefault();
          const email = document.getElementById("email").value;
          const pass = document.getElementById("password").value;
          const errEl = document.getElementById("err");
          errEl.style.display = "none";
          try {
            await doLogin(email, pass);
            location.href = "dashboard.html";
          } catch {
            errEl.textContent = "Identifiants invalides";
            errEl.style.display = "block";
          }
        });
    </script>
  </body>
</html>
